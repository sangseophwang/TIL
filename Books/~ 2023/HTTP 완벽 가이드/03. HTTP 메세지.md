> HTTP가 인터넷의 배달원이라면, HTTP 메세지는 무언가를 담아 보내는 소포와 같다. 이번 장을 통해 메세지가 어떻게 흘러가는지, 요청과 응답의 차이가 무엇인지, 여러 HTTP 헤더들은 무슨 일을 하는지 등에 대해 알아보고자 한다.

## 3.1 메세지의 흐름

- HTTP 메세지는 HTTP 어플리케이션 간에 주고받은 `데이터의 블록`들이다.
- 이 메세지는 `클라이언트, 서버, 프록시` 사이를 흐른다.
- 메세지가 원 서버로 향하는 것은 `인바운드`, 모든 처리가 끝난 뒤 메세지가 사용자에게 돌아오는 것은 `아웃바운드` 로 이동한다고 한다.
- 그리고 HTTP 메세지는 강물과 같이 흐른다고 해서 `다운스트림` 으로 흐른다고 한다. 메세지는 결코 업스트림으로 흐르지 않는다. 요청과 응답은 다운스트림으로 흐르는 것이다.

## 3.2 메세지의 각 부분

- 헤더는 본문에 대한 꽤 많은 정보를 준다. `Content-Type` 줄은 본문이 무엇인지, `Content-Length`는 본문의 크기를 말해준다.

1. 메서드

- 클라이언트 측에서 서버가 리소스에 대해 수행해주길 바라는 동작. GET, POST 등이 있다.
- 보통 GET과 HEAD는 안전하다고 할 수 있는데, 이는 이 두 메서드를 사용하는 HTTP 요청의 결과로 서버에 어떤 작용도 없음을 의미한다.
  - GET : 서버에서 어떤 문서를 가져온다.
  - POST : 서버가 처리해야 할 데이터를 보낸다.
  - PUT : 서버에 요청 메세지의 본문을 저장한다. (update)
  - HEAD : 서버에서 어떤 문서에 대해 헤더만 가져온다.
  - TRACE : 메세지가 프록시를 거쳐 서버에 도달하는 과정을 추적한다.
  - DELETE : 서버에서 문서를 제거한다.

2. 요청 URL

- 요청 대상이 되는 리소스를 지칭하는 완전한 URL 혹은 URL의 경로 구성요소

3. 버전

- HTTP의 버전

4. 상태 코드

- 요청 중에 무엇이 일어났는지 설명하는 세 자리의 숫자. 100, 200, 404 등.
  - 100-101 : 정보
    - `100(continue)` : 요청의 시작 부분 일부가 받아들여졌다. 클라이언트는 나머지를 계속 이어서 보내야 한다.
  - 200-206 : 성공
  - 300-305 : 리다이렉션
  - 400-415 : 클라이언트 에러
  - 500-505 : 서버 에러

5. 사유 구절 (reason-pharase)

- 상태 코드를 설명해주는 짧은 문구. OK, Not found, Unauthorized 등.

6. 헤더들

- 이름, 콜론, 선택적 공백 값, CRLF
- Cache-Control, Connection, Accept, Content-Type, Client-IP, Host, Except(조건부 요청 헤더), Authorization, Cookie..

7. 엔터티 본문

- 임의의 데이터 블록. 모든 메세지가 엔터티 본문을 갖는 것은 아니다.
- 데이터 블록의 종류로는 이미지, 비디오, HTML, 소프트웨어 어플리케이션, 신용카드 트랜잭션, 전자우편 등이 있다.
